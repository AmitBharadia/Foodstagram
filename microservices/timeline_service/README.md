# Timeline Service

## APIs for comments

### GET /timeline
Access all images in system to display to all users along with the number of likes and comments.
```
response_body = {"timeline" : [
			[
			"Id": <uuid generated by the service>,
			"Description": <description about the picture>,
			"Url": <AWS S3 url of the image1>, 
			"UserId": <user_id>,
			"UserName": <user_name>,
			"Timestamp": <Timestamp when photo was saved in the system>,
			"LikeCount": <number of like for the image1>,
			"CommentCount": <number of comments for image1>
			],
			[
			"Id": <uuid generated by the service>,
			"Description": <description about the picture>,
			"Url": <AWS S3 url of the image2>, 
			"UserId": <user_id>,
			"UserName": <user_name>,
			"Timestamp": <Timestamp when photo was saved in the system>,
			"LikeCount": <number of like for the image2>,
			"CommentCount": <number of comments for image2>
			],
			...
			...
			...
		]
	}
```

### POST /addimage
SNS subsciber to add new images into Redis cluster to prepare user timeline 
```
request_body={
		"Type": <>,
		"MessageId": <AWS message id of event published>,
		"TopicArn": <>,
		"Message": <Image structure as a string>,
		"Timestamp": <Timestamp when event was published>,
		"SignatureVersion":
		"Signature":
		"SigningCertURL":
		"SubscribeURL":
		"UnsubscribeURL":
	}
```
RESPONSE
* HTTP 201 - Sucessfully added image to timeline
* HTTP 400 - Error reading data or updating the redis cluster


### POST /updatelikes
SNS subsciber to update like count value when users like or dislike an image 
```
request_body={
		"Type": <>,
		"MessageId": <AWS message id of event published>,
		"TopicArn": <>,
		"Message": "{"id": <image_id>, "count": <new like count value>}",
		"Timestamp": <Timestamp when event was published>,
		"SignatureVersion":
		"Signature":
		"SigningCertURL":
		"SubscribeURL":
		"UnsubscribeURL":
	}
```

### POST /updatecomments
SNS subsciber to update comment count value when users add or delete comments
```
request_body={
		"Type": <>,
		"MessageId": <AWS message id of event published>,
		"TopicArn": <>,
		"Message": "{"id": <image_id>, "count": <new comment count value>}",
		"Timestamp": <Timestamp when event was published>,
		"SignatureVersion":
		"Signature":
		"SigningCertURL":
		"SubscribeURL":
		"UnsubscribeURL":
	}
```
